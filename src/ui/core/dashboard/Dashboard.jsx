import { Map } from "@vis.gl/react-google-maps";
import React, { useEffect, useState } from "react";
import { AddNewZone, AddNewZoneButton, Card, Panel } from "./components";

import styles from "./Dashboard.module.css";
import { Button } from "common/components";

export const DashBoard = () => {
  const [systems, setSystems] = useState([]);
  const [zones, setZones] = useState([]);
  const [selectedZone, setSelectedZone] = useState(-1);
  const [isAddNewZonePhase, setIsAddNewZonePhase] = useState(false);

  useEffect(() => {
    // fetch data
    setSystems([]);
    setZones([]);
  }, []);

  const cards = [
    {
      name: "Zones",
      val: "7",
      Icon: () => {
        return (
          <svg
            width="56"
            height="50"
            viewBox="0 0 56 50"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M39.4323 0H17.345C15.409 0 13.6093 1.05556 12.6276 2.77778L1.61124 22.2222C0.629586 23.9444 0.629586 26.0556 1.61124 27.7778L12.6276 47.2222C13.6093 48.9444 15.409 50 17.345 50H39.405C41.341 50 43.1407 48.9444 44.1224 47.2222L55.1388 27.7778C56.1204 26.0556 56.1204 23.9444 55.1388 22.2222L44.1224 2.77778C43.168 1.05556 41.3683 0 39.4323 0Z"
              fill="black"
            />
          </svg>
        );
      },
    },
    {
      name: "Systems",
      val: "8",
      Icon: () => (
        <svg
          width="55"
          height="50"
          viewBox="0 0 55 50"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M49.2085 25.9312L39.1554 43.4818C38.9929 43.7655 38.759 44.0009 38.4774 44.1644C38.1958 44.3279 37.8763 44.4136 37.5513 44.413H17.445C17.1206 44.413 16.8019 44.3269 16.521 44.1635C16.2401 44 16.0068 43.7649 15.8446 43.4818L5.79147 25.9312C5.62927 25.6481 5.54388 25.3269 5.54388 25C5.54388 24.6731 5.62927 24.3519 5.79147 24.0688L15.8446 6.51818C16.0068 6.23507 16.2401 5.99998 16.521 5.83653C16.8019 5.67307 17.1206 5.58702 17.445 5.58701H37.5513C37.8757 5.58702 38.1944 5.67307 38.4753 5.83653C38.7562 5.99998 38.9895 6.23507 39.1517 6.51818L49.2048 24.0688C49.367 24.3519 49.4524 24.6731 49.4524 25C49.4524 25.3269 49.3707 25.6481 49.2085 25.9312ZM54.0097 21.2753C54.6584 22.4078 55 23.6924 55 25C55 26.3076 54.6584 27.5922 54.0097 28.7247L43.9565 46.2753C43.3074 47.4083 42.3737 48.349 41.2493 49.0029C40.1249 49.6567 38.8495 50.0006 37.5513 50H17.445C16.1475 50 14.8728 49.6557 13.7491 49.0019C12.6254 48.3481 11.6923 47.4077 11.0435 46.2753L0.990344 28.7247C0.341558 27.5922 0 26.3076 0 25C0 23.6924 0.341558 22.4078 0.990344 21.2753L11.0435 3.72467C11.6923 2.59226 12.6254 1.65189 13.7491 0.99807C14.8728 0.344255 16.1475 3.32183e-05 17.445 0H37.5513C38.8489 3.32183e-05 40.1235 0.344255 41.2472 0.99807C42.3709 1.65189 43.304 2.59226 43.9528 3.72467L54.0097 21.2753ZM33.0422 25C33.0422 26.4818 32.4581 27.9028 31.4184 28.9506C30.3787 29.9984 28.9685 30.587 27.4982 30.587C26.0278 30.587 24.6176 29.9984 23.5779 28.9506C22.5382 27.9028 21.9541 26.4818 21.9541 25C21.9541 23.5182 22.5382 22.0972 23.5779 21.0494C24.6176 20.0016 26.0278 19.413 27.4982 19.413C28.9685 19.413 30.3787 20.0016 31.4184 21.0494C32.4581 22.0972 33.0422 23.5182 33.0422 25ZM38.5862 25C38.5862 27.9635 37.418 30.8057 35.3386 32.9012C33.2592 34.9968 30.4389 36.174 27.4982 36.174C24.5574 36.174 21.7371 34.9968 19.6577 32.9012C17.5783 30.8057 16.4101 27.9635 16.4101 25C16.4101 22.0365 17.5783 19.1943 19.6577 17.0988C21.7371 15.0032 24.5574 13.826 27.4982 13.826C30.4389 13.826 33.2592 15.0032 35.3386 17.0988C37.418 19.1943 38.5862 22.0365 38.5862 25Z"
            fill="black"
          />
        </svg>
      ),
    },
    {
      name: "Generated",
      val: "1210kW",
      Icon: () => (
        <svg
          width="34"
          height="50"
          viewBox="0 0 34 50"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M26.5026 0.213868C26.7962 0.391166 27.0235 0.666936 27.1471 0.996129C27.2708 1.32532 27.2837 1.68848 27.1836 2.02627L21.7808 20.3127H31.7495C32.0424 20.3126 32.329 20.4018 32.5738 20.5694C32.8186 20.737 33.011 20.9756 33.1271 21.2558C33.2432 21.5359 33.2781 21.8454 33.2273 22.1459C33.1765 22.4464 33.0424 22.7249 32.8414 22.947L8.84229 49.5079C8.61007 49.7652 8.30107 49.9329 7.96564 49.9837C7.63021 50.0346 7.28813 49.9656 6.99516 49.788C6.7022 49.6104 6.47561 49.3347 6.35235 49.0058C6.22908 48.6769 6.2164 48.3142 6.31638 47.9768L11.7192 29.6872H1.75054C1.45759 29.6873 1.17101 29.5981 0.926192 29.4305C0.68137 29.2629 0.489021 29.0243 0.372889 28.7441C0.256758 28.464 0.221927 28.1545 0.272698 27.854C0.323468 27.5535 0.457616 27.275 0.658583 27.053L24.6577 0.491977C24.8896 0.235114 25.1982 0.0675285 25.5331 0.0164687C25.8681 -0.0345911 26.2098 0.0338781 26.5026 0.210743V0.213868Z"
            fill="black"
          />
        </svg>
      ),
    },
    {
      name: "Health",
      val: "100%",
      Icon: () => (
        <svg
          width="56"
          height="42"
          viewBox="0 0 56 42"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M44.8025 0.376132C44.1324 0.42832 43.4919 0.67448 42.9594 1.08456C42.4268 1.49464 42.0251 2.0509 41.8034 2.68544C41.5817 3.31998 41.5495 4.00534 41.7108 4.65785C41.8721 5.31037 42.2199 5.90181 42.7117 6.35998C44.6362 8.28072 46.1622 10.5629 47.2018 13.0754C48.2414 15.5878 48.7741 18.281 48.7694 21C48.7726 23.7188 48.2392 26.4115 47.1996 28.9237C46.1601 31.436 44.635 33.7183 42.7117 35.64C42.3774 35.9592 42.1104 36.342 41.9261 36.7659C41.7419 37.1898 41.6443 37.6463 41.639 38.1084C41.6336 38.5706 41.7207 39.0292 41.8952 39.4572C42.0696 39.8852 42.3278 40.2741 42.6546 40.6009C42.9814 40.9277 43.3703 41.186 43.7983 41.3604C44.2264 41.5348 44.6849 41.6219 45.1471 41.6166C45.6093 41.6113 46.0657 41.5136 46.4896 41.3294C46.9135 41.1452 47.2963 40.8781 47.6156 40.5438C52.7887 35.3551 55.6937 28.327 55.6937 21C55.6937 13.673 52.7887 6.64487 47.6156 1.45613C47.2992 1.12166 46.9193 0.853663 46.4981 0.667821C46.0768 0.48198 45.6228 0.382031 45.1625 0.373824C45.0426 0.36758 44.9224 0.36758 44.8025 0.373824V0.376132ZM10.404 0.445363C9.63687 0.547106 8.92595 0.902973 8.38478 1.45613C3.2116 6.64487 0.306641 13.673 0.306641 21C0.306641 28.327 3.2116 35.3551 8.38478 40.5438C8.704 40.8781 9.08681 41.1452 9.51071 41.3294C9.93461 41.5136 10.3911 41.6113 10.8532 41.6166C11.3154 41.6219 11.774 41.5348 12.202 41.3604C12.63 41.186 13.0189 40.9277 13.3457 40.6009C13.6725 40.2741 13.9308 39.8852 14.1052 39.4572C14.2796 39.0292 14.3667 38.5706 14.3614 38.1084C14.3561 37.6463 14.2584 37.1898 14.0742 36.7659C13.89 36.342 13.6229 35.9592 13.2886 35.64C11.3641 33.7192 9.83815 31.437 8.79856 28.9246C7.75897 26.4122 7.22622 23.719 7.23093 21C7.22773 18.2812 7.76118 15.5885 8.80068 13.0762C9.84019 10.564 11.3653 8.28163 13.2886 6.35998C13.8119 5.85181 14.1613 5.19132 14.2869 4.4728C14.4125 3.75427 14.3079 3.01443 13.988 2.35888C13.6682 1.70332 13.1494 1.16556 12.5058 0.82234C11.8622 0.479122 11.1266 0.345686 10.404 0.445363ZM19.2032 8.09075C18.4443 8.17236 17.7336 8.50257 17.1817 9.02998C15.507 10.543 14.1672 12.3894 13.2484 14.4509C12.3296 16.5123 11.852 18.7431 11.8463 21C11.8463 25.7261 13.854 30.0231 17.1102 32.9723C17.4466 33.28 17.8403 33.5185 18.2688 33.6741C18.6974 33.8297 19.1524 33.8994 19.6078 33.8791C20.0633 33.8589 20.5103 33.7491 20.9234 33.5561C21.3364 33.3631 21.7074 33.0906 22.0152 32.7542C22.3229 32.4178 22.5614 32.0241 22.717 31.5956C22.8726 31.167 22.9422 30.712 22.922 30.2565C22.9017 29.8011 22.792 29.354 22.599 28.941C22.406 28.5279 22.1335 28.157 21.7971 27.8492C20.8391 26.9847 20.0742 25.9279 19.5525 24.7476C19.0308 23.5674 18.7639 22.2904 18.7694 21C18.7646 19.7091 19.032 18.4318 19.5541 17.2512C20.0762 16.0707 20.8412 15.0134 21.7994 14.1484C22.3524 13.6673 22.7385 13.0231 22.9019 12.3085C23.0653 11.5939 22.9976 10.8459 22.7086 10.1723C22.4197 9.49861 21.9243 8.93407 21.2939 8.55999C20.6635 8.18592 19.933 8.02161 19.2032 8.09075ZM36.294 8.09075C35.6075 8.1286 34.9478 8.37002 34.3991 8.78425C33.8503 9.19847 33.4374 9.76673 33.2128 10.4166C32.9883 11.0664 32.9624 11.7684 33.1383 12.433C33.3143 13.0977 33.6842 13.6949 34.2009 14.1484C35.1597 15.013 35.9251 16.0701 36.4473 17.2508C36.9694 18.4314 37.2364 19.709 37.2309 21C37.2357 22.2908 36.9683 23.5682 36.4463 24.7487C35.9242 25.9293 35.1591 26.9865 34.2009 27.8515C33.8152 28.1396 33.4939 28.5049 33.2573 28.9242C33.0208 29.3435 32.8744 29.8075 32.8273 30.2866C32.7803 30.7657 32.8337 31.2494 32.9841 31.7067C33.1345 32.1639 33.3787 32.5848 33.701 32.9424C34.0233 33.3 34.4167 33.5864 34.8559 33.7834C35.2952 33.9804 35.7707 34.0836 36.2521 34.0864C36.7335 34.0892 37.2102 33.9916 37.6517 33.7997C38.0932 33.6079 38.4899 33.3261 38.8163 32.9723C40.4917 31.4593 41.8321 29.6125 42.7514 27.5506C43.6706 25.4888 44.1484 23.2575 44.154 21C44.1626 18.7472 43.6985 16.5178 42.7919 14.4556C41.8852 12.3933 40.556 10.5442 38.8902 9.02767C38.5448 8.70179 38.1361 8.45045 37.6895 8.28927C37.2429 8.12808 36.7679 8.06051 36.294 8.09075ZM28.0002 16.8184C27.1732 16.8189 26.365 17.0645 25.6777 17.5243C24.9903 17.984 24.4547 18.6373 24.1386 19.4014C23.8224 20.1655 23.74 21.0062 23.9016 21.8172C24.0632 22.6282 24.4616 23.373 25.0465 23.9576C25.6314 24.5422 26.3765 24.9402 27.1875 25.1013C27.9986 25.2625 28.8393 25.1796 29.6032 24.863C30.3672 24.5464 31.0201 24.0105 31.4795 23.3229C31.9388 22.6353 32.184 21.8269 32.184 21C32.1849 20.4503 32.0773 19.9058 31.8674 19.3978C31.6575 18.8898 31.3493 18.4282 30.9606 18.0395C30.5719 17.6508 30.1103 17.3427 29.6023 17.1328C29.0943 16.9228 28.5499 16.8175 28.0002 16.8184Z"
            fill="black"
          />
        </svg>
      ),
    },
  ];

  return (
    <div className={styles["dashboard-container"]}>
      {!isAddNewZonePhase && (
        <>
          <div className={styles["map-container"]}>
            <Map
              clickableIcons={false}
              style={{
                userSelect: "none",
                outline: "none",
              }}
              mapTypeId="hybrid"
              mapId={"b9e443513213961d"}
              disableDefaultUI={true}
              defaultZoom={12}
              defaultCenter={{ lat: -28.2125, lng: 24.069 }}
            >
              {/* display hexagons */}
            </Map>
          </div>
          <div className={styles["dashboard-content-container"]}>
            <div className={styles["dashboard-cards-container"]}>
              {cards &&
                cards.map((card, id) => (
                  <Card {...card} key={`dash_card_${id}`} />
                ))}
            </div>
            <div className={styles["panel"]}>
              <Panel id={selectedZone} />
            </div>
          </div>
          <AddNewZoneButton onClick={() => setIsAddNewZonePhase(true)} />
        </>
      )}
      {isAddNewZonePhase && <AddNewZone />}
    </div>
  );
};
